package ${package}.controller;

import org.springframework.validation.BindingResult;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.baomidou.mybatisplus.core.metadata.OrderItem;

import lombok.RequiredArgsConstructor;
import ${package_core}.entity.Req;
import com.bubblecloud.common.core.util.R;
import ${package_core}.entity.Pg;
import ${package_entity}.entity.${className};
import ${package}.service.${className}Service;

import io.swagger.v3.oas.annotations.security.SecurityRequirement;
import io.swagger.v3.oas.annotations.tags.Tag;
<#assign clazzName=${className?uncap_first}>
/**
 * 控制器：${tableComment}
 *
 * @author ${author}
 * @date   ${.now?string("yyyy/MM/dd HH:mm")}
 */
@Tag(description = "${clazzName}", name = "${tableComment}模块")
@RestController
@RequestMapping("/${clazzName}")
@SecurityRequirement(name = HttpHeaders.AUTHORIZATION)
@RequiredArgsConstructor
public class ${className}Controller {

	private final  ${className}Service ${clazzName}Service;

	/**
	 * 分页查询
	 */
	@GetMapping("/page")
	public R list(Pg pg, ${className} req) {
		pg.addOrderDefault(OrderItem.desc("t.id"));
		return Res.succ(${clazzName}Service.findPg(pg,req));
	}

	/**
	 * 添加
	 */
	@PostMapping("/create")
	public R create(Pg pg, @RequestBody @Validated({ Req.Create.class }) ${className} req, BindingResult result) {
		return ${clazzName}Service.create(req);
	}

	/**
	 * 修改
	 */
	@PostMapping("/update")
	public R update(Pg pg, @RequestBody @Validated({ Req.Update.class }) ${className} req, BindingResult result) {
		return ${clazzName}Service.update(req);
	}

	/**
	 * 删除
	 */
	@PostMapping("/delete")
	public R delete(Pg pg, @RequestBody @Validated({ Req.Delete.class }) ${className} req, BindingResult result) {
		return ${clazzName}Service.delete(req);
	}
}
